{"ast":null,"code":"import _regeneratorRuntime from\"/Users/matvejcernaev/Desktop/proj/diplom/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/matvejcernaev/Desktop/proj/diplom/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matvejcernaev/Desktop/proj/diplom/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Container,Form}from\"react-bootstrap\";import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import Row from\"react-bootstrap/Row\";import{NavLink,useLocation,useHistory}from\"react-router-dom\";import{LOGIN_ROUTE,REGISTRATION_ROUTE,SHOP_ROUTE}from\"../utils/consts\";import{login,registration}from\"../http/userAPI\";import{observer}from\"mobx-react-lite\";import{Context}from\"../index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=observer(function(){var _useContext=useContext(Context),user=_useContext.user;var location=useLocation();var history=useHistory();var isLogin=location.pathname===LOGIN_ROUTE;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var click=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isLogin){_context.next=7;break;}_context.next=4;return login(email,password);case 4:data=_context.sent;_context.next=10;break;case 7:_context.next=9;return registration(email,password);case 9:data=_context.sent;case 10:user.setUser(data);user.setIsAuth(true);if(email===\"admins@mail.ru\"){user.setIsAdmin(true);}history.push(SHOP_ROUTE);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data.message);case 19:case\"end\":return _context.stop();}},_callee,null,[[0,16]]);}));return function click(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center\",style:{height:window.innerHeight-54},children:/*#__PURE__*/_jsxs(Card,{style:{width:600},className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"m-auto\",children:isLogin?'Авторизация':\"Регистрация\"}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Form.Control,{className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 email...\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"password\"}),/*#__PURE__*/_jsxs(Row,{className:\"d-flex justify-content-between mt-3 pl-3 pr-3\",children:[isLogin?/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \",/*#__PURE__*/_jsx(NavLink,{to:REGISTRATION_ROUTE,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0441\\u044F!\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0415\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442? \",/*#__PURE__*/_jsx(NavLink,{to:LOGIN_ROUTE,children:\"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435!\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",onClick:click,children:isLogin?'Войти':'Регистрация'})]})]})]})});});export default Auth;","map":{"version":3,"names":["React","useContext","useState","Container","Form","Card","Button","Row","NavLink","useLocation","useHistory","LOGIN_ROUTE","REGISTRATION_ROUTE","SHOP_ROUTE","login","registration","observer","Context","jsx","_jsx","jsxs","_jsxs","Auth","_useContext","user","location","history","isLogin","pathname","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","click","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","sent","setUser","setIsAuth","setIsAdmin","push","t0","alert","response","message","stop","apply","arguments","className","style","height","window","innerHeight","children","width","Control","placeholder","value","onChange","e","target","type","to","variant","onClick"],"sources":["/Users/matvejcernaev/Desktop/proj/diplom/client/src/pages/Auth.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\nimport {Container, Form} from \"react-bootstrap\";\nimport Card from \"react-bootstrap/Card\";\nimport Button from \"react-bootstrap/Button\";\nimport Row from \"react-bootstrap/Row\";\nimport {NavLink, useLocation, useHistory} from \"react-router-dom\";\nimport {LOGIN_ROUTE, REGISTRATION_ROUTE, SHOP_ROUTE} from \"../utils/consts\";\nimport {login, registration} from \"../http/userAPI\";\nimport {observer} from \"mobx-react-lite\";\nimport {Context} from \"../index\";\n\nconst Auth = observer(() => {\n    const {user} = useContext(Context)\n    const location = useLocation()\n    const history = useHistory()\n    const isLogin = location.pathname === LOGIN_ROUTE\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n\n    const click = async () => {\n        try {\n            let data;\n            if (isLogin) {\n                data = await login(email, password);\n            } else {\n                data = await registration(email, password);\n            }\n            user.setUser(data)\n            user.setIsAuth(true)\n            if (email === \"admins@mail.ru\"){\n                user.setIsAdmin(true)\n            }\n            history.push(SHOP_ROUTE)\n        } catch (e) {\n            alert(e.response.data.message)\n        }\n\n    }\n\n    return (\n        <Container\n            className=\"d-flex justify-content-center align-items-center\"\n            style={{height: window.innerHeight - 54}}\n        >\n            <Card style={{width: 600}} className=\"p-5\">\n                <h2 className=\"m-auto\">{isLogin ? 'Авторизация' : \"Регистрация\"}</h2>\n                <Form className=\"d-flex flex-column\">\n                    <Form.Control\n                        className=\"mt-3\"\n                        placeholder=\"Введите ваш email...\"\n                        value={email}\n                        onChange={e => setEmail(e.target.value)}\n                    />\n                    <Form.Control\n                        className=\"mt-3\"\n                        placeholder=\"Введите ваш пароль...\"\n                        value={password}\n                        onChange={e => setPassword(e.target.value)}\n                        type=\"password\"\n                    />\n                    <Row className=\"d-flex justify-content-between mt-3 pl-3 pr-3\">\n                        {isLogin ?\n                            <div>\n                                Нет аккаунта? <NavLink to={REGISTRATION_ROUTE}>Зарегистрируйся!</NavLink>\n                            </div>\n                            :\n                            <div>\n                                Есть аккаунт? <NavLink to={LOGIN_ROUTE}>Войдите!</NavLink>\n                            </div>\n                        }\n                        <Button\n                            variant={\"outline-success\"}\n                            onClick={click}\n                        >\n                            {isLogin ? 'Войти' : 'Регистрация'}\n                        </Button>\n                    </Row>\n\n                </Form>\n            </Card>\n        </Container>\n    );\n});\n\nexport default Auth;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}