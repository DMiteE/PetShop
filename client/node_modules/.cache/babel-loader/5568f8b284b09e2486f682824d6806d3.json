{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/matvejcernaev/Desktop/proj/diplom/client/src/pages/Basket.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useContext, useState, setState, state } from 'react';\nimport { Context } from '..';\nimport { getBasket } from '../http/deviceAPI';\nimport { Button, Card, Col, Container, FormControl, Row, Form } from 'react-bootstrap';\nimport { observer } from 'mobx-react-lite';\nimport axios from 'axios'; //import close from '../assets/close.svg'\n\nconst Basket = observer(_c = _s(() => {\n  _s();\n\n  state = {\n    count: 1\n  };\n  const {\n    device\n  } = useContext(Context);\n  useEffect(() => {\n    getBasket().then(data => device.setBaskets(data));\n  }, []);\n  let productName;\n  const TOKEN = \"6112289360:AAFmj8qe0R9fmO2InO0Yw19__rqTd3H4ncU\",\n        CHAT_ID = \"-1001705979712\",\n        URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;\n  const [namePerson, setnamePerson] = useState('');\n  const [twelvename, settwelvename] = useState('');\n  const [phone, setphone] = useState('');\n  const [adress, setadress] = useState('');\n  const [index, setindex] = useState('');\n  const {\n    count\n  } = this.state;\n  let message = ''; // ----- Считаем общую сумму, которую юзер набрал в корзину ------- //\n\n  let prices = 0;\n  let productnames = [];\n  {\n    device.basket.map(price => prices += Number(price.device.price));\n  }\n  {\n    device.basket.map(product => productnames.push(product.device.name));\n  }\n\n  const post = async () => {\n    message = `<b>Заказ с сайта</b>\\n`;\n    message += `<b>Имя: </b>${namePerson}\\n`;\n    message += `<b>Фамилия: </b>${twelvename}\\n`;\n    message += `<b>Номер: </b>${phone}\\n`;\n    message += `<b>Адрес: </b>${adress}\\n`;\n    message += `<b>Почтовый индекс: </b>${index}\\n`;\n    message += `<b>Товары: </b>${productnames}\\n`;\n    message += `<b>На сумму: </b>${prices}\\n`;\n    axios.post(URI_API, {\n      chat_id: CHAT_ID,\n      parse_mode: 'html',\n      text: message\n    });\n  };\n\n  const onClickPlus = () => {\n    this.setState({\n      count: count++\n    });\n  };\n\n  const onClickMinus = () => {\n    setCount(count - 1);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"d-flex flex-sm-column justify-content-center align-items-center mt-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"pb-2\",\n      children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"d-flex flex-row  p-2 justify-content-between align-items-center mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"pr-2\",\n        children: \"\\u0418\\u0442\\u043E\\u0433\\u043E:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"pl-2\",\n        children: [prices, /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-weight-light pl-2\",\n          children: \"\\u0440\\u0443\\u0431\\u043B\\u0435\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), device.basket.map((product, index) => /*#__PURE__*/_jsxDEV(Card, {\n      className: \"d-flex w-100 p-2 justify-content-center mb-2\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"d-flex w-100\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-row align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: process.env.REACT_APP_API_URL + product.device.img,\n              width: 50\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"pl-3\",\n              children: product.device.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex h-100 flex-row justify-content-end align-items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"font-weight-light\",\n              children: [product.device.price, \" \\u0440\\u0443\\u0431\\u043B\\u0435\\u0439\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex h-100 flex-row justify-content-end align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-warning\",\n              type: \"submit\",\n              onClick: onClickMinus,\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: 5 + 'px'\n              },\n              children: count\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-warning\",\n              type: \"submit\",\n              onClick: this.onClickPlus,\n              children: \"+\"\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this)\n    }, product.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: \"4\",\n          controlId: \"validationCustom01\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\u0418\\u043C\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            required: true,\n            type: \"text\",\n            value: namePerson,\n            placeholder: \"\\u0418\\u0432\\u0430\\u043D\",\n            defaultValue: \"\",\n            onChange: e => setnamePerson(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n            children: \"Looks good!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: \"4\",\n          controlId: \"validationCustom02\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            required: true,\n            type: \"text\",\n            value: twelvename,\n            placeholder: \"\\u0418\\u0432\\u0430\\u043D\\u043E\\u0432\",\n            defaultValue: \"\",\n            onChange: e => settwelvename(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: \"4\",\n          controlId: \"validationCustomUsername\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"89009999999\",\n            value: phone,\n            \"aria-describedby\": \"inputGroupPrepend\",\n            required: true,\n            onChange: e => setphone(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n            type: \"invalid\",\n            children: \"Please choose a username.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: \"6\",\n          controlId: \"validationCustom03\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\u0413\\u043E\\u0440\\u043E\\u0434,\\u0434\\u043E\\u043C,\\u043A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"\\u0413\\u043E\\u0440\\u043E\\u0434\",\n            value: adress,\n            onChange: e => setadress(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n            type: \"invalid\",\n            children: \"Please provide a valid city.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          md: \"3\",\n          controlId: \"validationCustom05\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\u041F\\u043E\\u0447\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0438\\u043D\\u0434\\u0435\\u043A\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"398000\",\n            value: index,\n            onChange: e => setindex(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n            type: \"invalid\",\n            children: \"Please provide a valid zip.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"btn-warning\",\n        type: \"submit\",\n        onClick: post,\n        children: \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}, \"JEM0pLzxjibzyYO1ZvZSi8tt1KQ=\"));\n_c2 = Basket;\nexport default Basket;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Basket$observer\");\n$RefreshReg$(_c2, \"Basket\");","map":{"version":3,"sources":["/Users/matvejcernaev/Desktop/proj/diplom/client/src/pages/Basket.js"],"names":["React","useEffect","useContext","useState","setState","state","Context","getBasket","Button","Card","Col","Container","FormControl","Row","Form","observer","axios","Basket","count","device","then","data","setBaskets","productName","TOKEN","CHAT_ID","URI_API","namePerson","setnamePerson","twelvename","settwelvename","phone","setphone","adress","setadress","index","setindex","message","prices","productnames","basket","map","price","Number","product","push","name","post","chat_id","parse_mode","text","onClickPlus","onClickMinus","setCount","process","env","REACT_APP_API_URL","img","margin","id","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useContext,useState, setState, state} from 'react';\nimport { Context } from '..';\nimport { getBasket } from '../http/deviceAPI';\nimport { Button, Card, Col, Container, FormControl, Row, Form } from 'react-bootstrap'\nimport { observer } from 'mobx-react-lite';\nimport axios from 'axios';\n\n//import close from '../assets/close.svg'\n\nconst Basket = observer(() => {\n    state = {\n        count: 1,\n    }\n    const {device} = useContext(Context)\n    useEffect(() => {\n        getBasket().then(data => device.setBaskets(data))\n    }, [])\n    let productName;\n    const TOKEN = \"6112289360:AAFmj8qe0R9fmO2InO0Yw19__rqTd3H4ncU\",\n      CHAT_ID = \"-1001705979712\",\n      URI_API = `https://api.telegram.org/bot${ TOKEN }/sendMessage`;\n      const [namePerson, setnamePerson] = useState('')\n      const [twelvename, settwelvename] = useState('')\n      const [phone, setphone] = useState('')\n      const [adress, setadress] = useState('')\n      const [index, setindex] = useState('')\n      const {count} = this.state;\n      let message = ''\n     \n    // ----- Считаем общую сумму, которую юзер набрал в корзину ------- //\n    let prices = 0;\n    let productnames = []\n    {device.basket.map(price =>\n        prices += Number(price.device.price)\n    )}\n    {device.basket.map(product =>\n        productnames.push(product.device.name)\n    )}\n    const post =  async () =>{\n        message = `<b>Заказ с сайта</b>\\n`;\n        message += `<b>Имя: </b>${namePerson}\\n`;\n        message += `<b>Фамилия: </b>${twelvename}\\n`;\n        message += `<b>Номер: </b>${phone}\\n`;\n        message += `<b>Адрес: </b>${adress}\\n`;\n        message += `<b>Почтовый индекс: </b>${index}\\n`;\n        message += `<b>Товары: </b>${productnames}\\n`;\n        message += `<b>На сумму: </b>${prices}\\n`;\n        axios.post(URI_API,{\n           chat_id: CHAT_ID,\n           parse_mode: 'html',\n           text: message\n        })\n    }\n\n const onClickPlus = () => {\n        this.setState({\n            count: count++\n        })\n    }\n\n    const onClickMinus = () =>{\n        setCount(count - 1)\n    }\n   \n    return (\n        <Container\n            className=\"d-flex flex-sm-column justify-content-center align-items-center mt-3\"\n        >\n            <h1 className=\"pb-2\">Корзина</h1>\n\n\n\n            {/* ------- Считаем общую сумму ------- */}\n\n            <Card className=\"d-flex flex-row  p-2 justify-content-between align-items-center mb-2\">\n                <h1 className=\"pr-2\">Итого:</h1>\n                <h3 className=\"pl-2\">{prices}<span className=\"font-weight-light pl-2\">рублей</span></h3>\n            </Card>\n\n\n\n            {device.basket.map((product, index) =>(\n                <Card className=\"d-flex w-100 p-2 justify-content-center mb-2\" key={product.id}>\n                    <Row className=\"d-flex w-100\">\n                        <Col>\n                            <div className=\"d-flex flex-row align-items-center\">\n                                <img src={process.env.REACT_APP_API_URL + product.device.img} width={50} />\n                                <h1 className=\"pl-3\">{product.device.name}</h1>\n                            </div>\n                        </Col>\n                        \n                        <Col>\n                            <div className=\"d-flex h-100 flex-row justify-content-end align-items-center\">\n                                <h2 className=\"font-weight-light\">{product.device.price} рублей</h2>\n                            </div>\n                        </Col>\n                        <Col>\n                        <div  className=\"d-flex h-100 flex-row justify-content-end align-items-center\">\n                        <Button className=\"btn-warning\" type=\"submit\" onClick={onClickMinus}>-</Button>\n                             <h3 style={{margin: 5 + 'px'}} key={index} >{count}</h3>\n                           \n                             <Button className=\"btn-warning\" key={index} type=\"submit\" onClick={this.onClickPlus}>+</Button>\n                         </div>\n                        </Col>\n                \n                    </Row>\n\n                </Card>\n        \n          \n                \n                ))}\n\n            \n    <Form >\n      <Row className=\"mb-3\">\n        <Form.Group as={Col} md=\"4\" controlId=\"validationCustom01\">\n          <Form.Label>Имя</Form.Label>\n          <Form.Control\n            required\n            type=\"text\"\n            value={namePerson}\n            placeholder=\"Иван\"\n            defaultValue=\"\"\n            onChange={e => setnamePerson(e.target.value)}\n          />\n          <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n        </Form.Group>\n        <Form.Group as={Col} md=\"4\" controlId=\"validationCustom02\">\n          <Form.Label>Фамилия</Form.Label>\n          <Form.Control\n            required\n            type=\"text\"\n            value={twelvename}\n            placeholder=\"Иванов\"\n            defaultValue=\"\"\n            onChange={e => settwelvename(e.target.value)}\n          />\n          <Form.Control.Feedback>Телефон</Form.Control.Feedback>\n        </Form.Group>\n        <Form.Group as={Col} md=\"4\" controlId=\"validationCustomUsername\">\n          <Form.Label>Телефон</Form.Label>\n            <Form.Control\n              type=\"text\"\n              placeholder=\"89009999999\"\n              value={phone}\n              aria-describedby=\"inputGroupPrepend\"\n              required\n              onChange={e => setphone(e.target.value)}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              Please choose a username.\n            </Form.Control.Feedback>\n        </Form.Group>\n      </Row>\n      <Row className=\"mb-3\">\n        <Form.Group as={Col} md=\"6\" controlId=\"validationCustom03\">\n          <Form.Label>Город,дом,квартира</Form.Label>\n          <Form.Control type=\"text\" placeholder=\"Город\" value={adress} \n                  onChange={e => setadress(e.target.value)}\n                  required />\n          <Form.Control.Feedback type=\"invalid\">\n            Please provide a valid city.\n          </Form.Control.Feedback>\n        </Form.Group>\n        <Form.Group as={Col} md=\"3\" controlId=\"validationCustom05\">\n          <Form.Label>Почтовый индекс</Form.Label>\n          <Form.Control type=\"text\" placeholder=\"398000\" value={index}       \n            onChange={e => setindex(e.target.value)} required />\n          <Form.Control.Feedback type=\"invalid\">\n            Please provide a valid zip.\n          </Form.Control.Feedback>\n        </Form.Group>\n      </Row>\n      <Button className=\"btn-warning\" type=\"submit\" onClick={post}>Заказать</Button>\n    </Form>\n    \n        </Container>\n    );\n});\n\nexport default Basket;\n"]},"metadata":{},"sourceType":"module"}